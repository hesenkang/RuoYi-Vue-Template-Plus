(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bfddb89","chunk-6883eda2"],{"2f1d":function(e,t,a){},"3f4b":function(e,t,a){"use strict";a("2f1d")},4983:function(e,t,a){"use strict";a("8430")},5177:function(e,t,a){},6573:function(e,t,a){"use strict";a("5177")},"6f9d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"container"},[a("el-card",{staticClass:"box-card"},[a("HeBaseTabs",e._b({attrs:{tabs:e.list,"before-leave":e.handleBeforeLeave},on:{edit:e.handleTabsEdit,"tab-click":e.handleTabClick},scopedSlots:e._u([{key:"label",fn:function(t){var n=t.item;return[e._v(" "+e._s(n.title)+" "),a("span",{staticClass:"el-icon-edit",on:{click:function(t){return e.handleTabsEdit(n.id,"edit")}}})]}},{key:"default",fn:function(t){var n=t.item;return[a("div",{staticClass:"tree"},[a("HeAsideTree",e._b({ref:"asideTree"+n.id,staticStyle:{height:"80vh"},on:{check:e.onCheck,"node-click":e.onNodeClick,"current-change":e.onCurrentChange}},"HeAsideTree",Object.assign({},e.localTabsCfg),!1))],1)]}}]),model:{value:e.tabsActiveName,callback:function(t){e.tabsActiveName=t},expression:"tabsActiveName"}},"HeBaseTabs",Object.assign({},e.props),!1))],1),e.modal?a("HeEditModal",e._b({directives:[{name:"show",rawName:"v-show",value:e.modal.isShow,expression:"modal.isShow"}],attrs:{isShow:e.modal.isShow},on:{"update:isShow":function(t){return e.$set(e.modal,"isShow",t)},"update:is-show":function(t){return e.$set(e.modal,"isShow",t)},submit:e.submitEditForm}},"HeEditModal",Object.assign({},{modal:e.modal},e.modal),!1)):e._e()],1)},r=[],i=a("c7eb"),s=a("53ca"),c=a("1da1"),o=a("5530"),l=a("b85c"),u=(a("d9e2"),a("7db0"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("b775")),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"container"},[a("el-tabs",e._g(e._b({attrs:{value:e.value}},"el-tabs",e.$attrs,!1),e.$listeners),e._l(e.tabs,(function(t){return a("el-tab-pane",{key:t.name,attrs:{label:t.title,name:t.id,lazy:""},scopedSlots:e._u([{key:"label",fn:function(){return[e._t("label",null,{item:t})]},proxy:!0}],null,!0)},[e._t("default",null,{item:t})],2)})),1)],1)},f=[],h={props:{value:{type:String,default:""},tabs:{type:Array,default:function(){return[{title:"Tab 1",name:"1",content:"Tab 1 content"},{title:"Tab 2",name:"2",content:"Tab 2 content"}]}}},data:function(){return{editableTabsValue:"2",editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"},{title:"Tab 2",name:"2",content:"Tab 2 content"}],tabIndex:1}},methods:{}},b=h,p=a("2877"),m=Object(p["a"])(b,d,f,!1,null,null,null),v=m.exports,k=a("b7cf"),y=function(e,t){var a,n=t.children,r=t.label,i=Object(l["a"])(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.name=s[r],s.label=s[r],s[n]&&(s.children=s[n],y(s[n],t))}}catch(c){i.e(c)}finally{i.f()}return e},T={components:{HeEditModal:function(){return Promise.all([a.e("chunk-elementUI"),a.e("chunk-commons"),a.e("chunk-7c706c2f")]).then(a.bind(null,"39ba"))},HeAsideTree:k["default"],HeBaseTabs:v},props:{apiCfg:{type:Object,default:null},data:{type:[Array,Function],default:null},buttonsCfg:{type:Object,default:null},tabsCfg:{type:Object,default:function(){return null}},props:{type:Object,default:function(){return{}}}},data:function(){return{localTabsCfg:this.tabsCfg,list:[],tabsActiveName:"",tabDefaultName:"",modal:null,checkedKey:""}},computed:{buttonItems:function(){var e,t=(null===(e=this.buttonsCfg)||void 0===e?void 0:e.data)||null;return Array.isArray(t)?t:[]}},created:function(){this.initTree()},mounted:function(){var e=this;this.$eventBus.on("refresh",(function(){e.$refs["asideTree"+e.tabsActiveName].initTree()}),this)},methods:{submitEditForm:function(e){var t=this,a=e.button,n=e.form,r=a.type,i=a.apiCfg,s=i.config,c=i.handleFixRequestData,l=i.handleFixResponseData,d=Object(o["a"])({},s),f=Object(o["a"])({},n);d.isUrlSplice?d.url+="/".concat(f.ids):d.params?d.params=f:d.data=f,this.$HE.isFunction(c)&&(d=c(d)),Object(u["a"])(d).then((function(e){t.$HE.isFunction(l)&&(e=l(e));var a=e||{},n=a.code;200===n&&(t.$message({type:"success",message:"".concat("Add"===r?"新增":"编辑","成功!")}),t.modal.isShow=!1,t.initTree())}))},onCurrentChange:function(e,t){},onNodeClick:function(e,t,a){var n=e.id;this.checkedKey===n?(this.checkedKey=null,this.$eventBus.emit("onNodeClick",{node:t,data:a,classId:this.tabsActiveName})):(this.checkedKey=n,this.$eventBus.emit("onNodeClick",{item:e,node:t,data:a,classId:this.tabsActiveName}));var r=this.$refs["asideTree"+this.tabsActiveName].getBaseTree();r&&r.setCurrentKey(this.checkedKey)},onCheck:function(e,t){},handleBeforeLeave:function(e){var t=this.localTabsCfg.apiCfg.config;return t&&(t.params={classId:e}),this.$eventBus.emit("initClassId",e),!0},handleTabClick:function(e){e.name},handleTabsEdit:function(e,t){if("add"===t){var a=this.buttonItems.find((function(e){return"Add"===e.type})),n=a.modal;this.modal=Object(o["a"])(Object(o["a"])({},n),{},{button:a}),this.modal.isShow=!0}if("edit"===t){var r=this.buttonItems.find((function(e){return"Edit"===e.type}));this.handleEdit(r,{row:{id:e}})}if("remove"===t){var i=this.buttonItems.find((function(e){return"Delete"===e.type}));this.handleDelete(i,{row:{id:e}})}},handleEdit:function(e,t){var a=this,n=t.row,r=e.detailApiCfg,i=(e.apiCfg,e.modal);this.modal=Object(o["a"])(Object(o["a"])({},i),{},{button:e}),this.modal.isShow=!0;var s=r.config,c=(r.handleFixRequestData,r.handleFixResponseData),l=Object(o["a"])({},s);l.isUrlSplice?l.url+="/".concat(n.id||""):l.params?l.params=newForm:l.data=newForm,Object(u["a"])(l).then((function(e){a.$HE.isFunction(c)&&(e=c(e));var t=e||{},n=t.code,r=t.data;if(200===n){if(!r)return;a.modal.form=r,a.initTree()}}))},handleDelete:function(e,t){var a=this,n=t.row;this.$confirm("此操作将删除数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.apiCfg,r=t.config,i=t.handleFixRequestData,s=t.handleFixResponseData,c={ids:n.id},l=Object(o["a"])({},r);l.isUrlSplice?l.url+="/".concat(c.ids):l.params?l.params=c:l.data=c,a.$HE.isFunction(i)&&(c=i(c)),Object(u["a"])(l).then((function(e){a.$HE.isFunction(s)&&(e=s(e));var t=e||{},r=t.code;200===r&&(a.$message({type:"success",message:"删除成功!"}),a.tabsActiveName===n.id&&(a.tabsActiveName=a.tabDefaultName),a.initTree())}))})).catch((function(){}))},initTree:function(){var e=this.apiCfg;if(e){var t=e||{},a=t.config;null!==a&&void 0!==a&&a.url?this.getTree(e):this.data&&this.getTree(this.data)}},getTree:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var n,r,c,o,l,d,f,h,b,p,m;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("object"!==Object(s["a"])(e)){a.next=23;break}return n=e,a.next=4,Object(u["a"])(n.config);case 4:if(r=a.sent,c=r,!c||!t.$HE.isObject(c)){a.next=15;break}a.t0=Object(i["a"])().keys(c);case 8:if((a.t1=a.t0()).done){a.next=15;break}if(o=a.t1.value,!Array.isArray(c[o])){a.next=13;break}return c=c[o],a.abrupt("break",15);case 13:a.next=8;break;case 15:if(!(c&&t.$HE.isObject(c)||!Array.isArray(c))){a.next=17;break}throw new Error("getTree: 数据解析失败",c);case 17:t.defaultProps&&(c=y(c,t.defaultProps)),n.handleFixResponseData&&t.$HE.isFunction(n.handleFixResponseData)&&(c=n.handleFixResponseData(c)),t.list=c,Array.isArray(t.list)&&t.list.length>0&&(d=(null===(l=t.localTabsCfg)||void 0===l?void 0:l.apiCfg)||{},f=d.config,f&&f.params&&(h=t.list[0]?t.list[0].id:"",""===t.tabDefaultName?(f.params={classId:h},t.tabsActiveName=h,t.$eventBus.emit("initClassId",h)):t.tabDefaultName=h)),a.next=41;break;case 23:if("function"!==typeof e){a.next=40;break}return b=e,a.next=27,b();case 27:if(p=a.sent,!Array.isArray(p)){a.next=32;break}t.list=p,a.next=38;break;case 32:if(!t.$HE.isObject(p)){a.next=37;break}m=p.data,t.list=m,a.next=38;break;case 37:throw new Error("getTree: data: function 数据解析失败",p);case 38:a.next=41;break;case 40:Array.isArray(e)&&(t.list=e);case 41:case"end":return a.stop()}}),a)})))()}}},x=T,g=(a("3f4b"),Object(p["a"])(x,n,r,!1,null,"38acf3f2",null));t["default"]=g.exports},"774c":function(e,t,a){"use strict";a("a08a")},8430:function(e,t,a){},a08a:function(e,t,a){},b7cf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"side-tree-container"},[a("HeSearchTree",e._g(e._b({ref:"searchTree",attrs:{data:e.treeData,checkStrictly:!e.strictly},scopedSlots:e._u([{key:"search-options",fn:function(){return[e._t("search-options-top"),a("el-checkbox",{on:{change:e.handleCheckedTreeExpand},model:{value:e.expand,callback:function(t){e.expand=t},expression:"expand"}},[e._v("展开 / 折叠")]),e.props.showCheckbox?a("el-checkbox",{on:{change:e.handleCheckedTreeNodeAll},model:{value:e.nodeAll,callback:function(t){e.nodeAll=t},expression:"nodeAll"}},[e._v("全选 / 清空")]):e._e(),e.props.showCheckbox?a("el-checkbox",{model:{value:e.strictly,callback:function(t){e.strictly=t},expression:"strictly"}},[e._v("级联")]):e._e(),e._t("search-options-bottom")]},proxy:!0}],null,!0)},"HeSearchTree",Object.assign({},e.$attrs,e.props),!1),e.$listeners))],1)},r=[],i=a("c7eb"),s=a("53ca"),c=a("1da1"),o=a("b85c"),l=(a("d9e2"),a("b0c0"),a("d3b7"),a("ddb0"),a("b775")),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),a("div",{staticClass:"search-options"},[e._t("search-options")],2),a("div",{staticClass:"search-tree"},[a("HeBaseTree",e._g(e._b({ref:"baseTree",attrs:{"filter-node-method":e.filterNode}},"HeBaseTree",e.$attrs,!1),e.$listeners))],1)])},d=[],f=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"container"},[a("el-tree",e._g(e._b({ref:"tree",attrs:{"node-key":e.nodeKey,props:e.defaultProps,data:e.data,"show-checkbox":e.showCheckbox,"check-strictly":e.checkStrictly,"default-checked-keys":e.defaultCheckedKeys,"default-expand-all":e.defaultExpandAll,"expand-on-click-node":e.expandOnClickNode,"highlight-current":""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return[e._t("default",[a("span",[e._v(e._s(n.label))])],{node:n,data:r})]}}],null,!0)},"el-tree",e.$attrs,!1),e.$listeners))],1)}),h=[],b={inheritAttrs:!1,name:"HeBaseTree",props:{nodeKey:{type:String,default:"id"},defaultProps:{type:Object,default:function(){return{children:"children",label:"label"}}},data:{type:Array,default:function(){return[]}},showCheckbox:{type:Boolean,default:!0},checkStrictly:{type:Boolean,default:!1},defaultCheckedKeys:{type:Array,default:function(){return[]}},defaultExpandAll:{type:Boolean,default:!0},expandOnClickNode:{type:Boolean,default:!1}},created:function(){},wathch:{},methods:{getTree:function(){return this.$refs.tree}}},p=b,m=(a("6573"),a("2877")),v=Object(m["a"])(p,f,h,!1,null,"adfd4308",null),k=v.exports,y={components:{HeBaseTree:k},props:{},data:function(){return{filterText:""}},watch:{filterText:function(e){this.getBaseTree().filter(e)}},computed:{treeData:function(){return this.$attrs.data}},methods:{filterNode:function(e,t){return!e||-1!==(null===t||void 0===t?void 0:t.name.indexOf(e))},getBaseTree:function(){return this.$refs.baseTree.getTree()}}},T=y,x=(a("774c"),Object(m["a"])(T,u,d,!1,null,"b60d9d50",null)),g=x.exports,C=function(e,t){var a,n=t.children,r=t.label,i=Object(o["a"])(e);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.name=s[r],s.label=s[r],s[n]&&(s.children=s[n],C(s[n],t))}}catch(c){i.e(c)}finally{i.f()}return e},A={components:{HeSearchTree:g},props:{apiCfg:{type:Object,default:function(){return{}}},data:{type:[Array,Function],default:function(){return[]}},props:{type:Object,default:function(){return{}}}},data:function(){return{vm:this,filterText:"",expand:!0,nodeAll:!1,strictly:!0,treeData:[]}},created:function(){this.onEventBus(),this.initTree()},watch:{},computed:{baseTree:function(){return this.getSearchTree().getBaseTree()},defaultProps:function(){var e;return(null===(e=this.props)||void 0===e?void 0:e.defaultProps)||null}},methods:{onEventBus:function(){var e=this;this.$eventBus.on("onSearchTree",(function(){e.initTree()}),this)},handleCheckedTreeExpand:function(e){var t=this.baseTree.store.nodesMap;for(var a in t)t[a].expanded=e},handleCheckedTreeNodeAll:function(e){var t=this.baseTree;t&&(t.setCurrentKey(null),t.setCheckedNodes(e?this.treeData:[]),this.$emit("handleCheckedTreeNodeAll",t.getCheckedKeys()))},getSearchTree:function(){return this.$refs.searchTree},getBaseTree:function(){return this.$refs.searchTree.getBaseTree()},initTree:function(){var e=this.apiCfg||{},t=e.config;t&&t.url?this.getTree(this.apiCfg):this.data&&this.getTree(this.data)},getTree:function(e){var t=this;return Object(c["a"])(Object(i["a"])().mark((function a(){var n,r,c,o,u,d,f,h,b,p;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("object"!==Object(s["a"])(e)){a.next=26;break}return n=e,r=n.config,c=n.handleFixRequestData,c&&t.$HE.isFunction(c)&&(r=c(r,t.vm)),a.next=7,Object(l["a"])(r);case 7:if(o=a.sent,u=o,!u||!t.$HE.isObject(u)){a.next=18;break}a.t0=Object(i["a"])().keys(u);case 11:if((a.t1=a.t0()).done){a.next=18;break}if(d=a.t1.value,!Array.isArray(u[d])){a.next=16;break}return u=u[d],a.abrupt("break",18);case 16:a.next=11;break;case 18:if(!(u&&t.$HE.isObject(u)||!Array.isArray(u))){a.next=20;break}throw new Error("getTree: 数据解析失败",u);case 20:t.defaultProps&&(u=C(u,t.defaultProps)),f=n.handleFixResponseData,f&&t.$HE.isFunction(f)&&(u=f(u)),t.treeData=u,a.next=36;break;case 26:if("function"!==typeof e){a.next=35;break}return h=e,a.next=30,h();case 30:b=a.sent,p=b.data,t.treeData=p,a.next=36;break;case 35:Array.isArray(e)&&(t.treeData=e);case 36:case"end":return a.stop()}}),a)})))()}}},O=A,j=(a("4983"),Object(m["a"])(O,n,r,!1,null,"f9e944a6",null));t["default"]=j.exports}}]);