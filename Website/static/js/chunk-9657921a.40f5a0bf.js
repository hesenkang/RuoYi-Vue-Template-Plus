(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9657921a"],{"2d57":function(t,e,a){"use strict";a("c034")},"5e16":function(t,e,a){},"62c5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"container"},[a("el-table",t._g(t._b({directives:[{name:"show",rawName:"v-show",value:t.showColumnViews.length>0,expression:"showColumnViews.length > 0"}],ref:"table",attrs:{height:t.$attrs.height?t.$attrs.height:"60vh",data:t.tableData,border:!0,"tooltip-effect":"light"}},"el-table",t.$attrs,!1),t.$listeners),[t._l(t.showColumnViews,(function(e,n){return[t.checkable&&t.selectionIndex===n?a("el-table-column",{key:n,attrs:{prop:"_selection",type:"selection",width:t.selectionWidth,fixed:e.fixed}}):t._e(),e.components||e.isOperate?a("el-table-column",{key:n+":"+e.field+":"+e.components,attrs:{prop:e.field,type:e.type,label:e.label,align:e.isOperate?"center":e.align,width:e.width,fixed:e.fixed},scopedSlots:t._u([{key:"default",fn:function(a){return[t._t("default",null,{item:e,colunmIndex:n,data:a})]}}],null,!0)}):a("el-table-column",{key:n+":"+e.field,attrs:{prop:e.field,type:e.isOperate?"":"default",label:e.label,sortable:!!e.sortable&&"custom",align:e.isOperate?"center":e.align,width:e.width,fixed:e.fixed}})]}))],2)],1)},i=[],o=(a("a9e3"),{props:{columns:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},checkable:{type:Boolean,default:!1},selectionWidth:{type:Number,default:40},selectionIndex:{type:Number,default:0}},data:function(){return{}},computed:{showColumnViews:function(){return this.columns}}}),s=o,l=(a("2d57"),a("2877")),r=Object(l["a"])(s,n,i,!1,null,"543a18da",null);e["a"]=r.exports},"7bdb":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"app"},[t.buttonTopsItems.length>0?a("section",{staticClass:"buttons_top"},t._l(t.buttonTopsItems,(function(e){return a("el-button",t._b({key:e.field,on:{click:function(a){return t.handelTopButtonClick(e)}}},"el-button",Object.assign({},e.props),!1),[t._v(t._s(e.label))])})),1):t._e(),a("HeBaseTable",t._b({attrs:{columns:t.columns,tableData:t.tableDataCpt},on:{select:t.handleSelect,"select-all":t.handleSelectAll,"selection-change":t.handleSelectionChange},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,i=e.data;return[n.components?a(n.components,t._b({tag:"component",attrs:{data:i},model:{value:i.row[n.field],callback:function(e){t.$set(i.row,n.field,e)},expression:"data.row[item.field]"}},"component",Object.assign({},n.props),!1),[t._v(" "+t._s(i.row[n.field])+" ")]):t._e(),n.isOperate?a("section",t._l(t.buttonRowsItems,(function(e){return a("el-button",t._b({key:e.field,attrs:{disabled:t.handelRowButtonDisabled(e,i)},on:{click:function(a){return t.handelRowButtonClick(e,i)}}},"el-button",Object.assign({},e.props),!1),[t._v(t._s(e.label))])})),1):t._e()]}}])},"HeBaseTable",Object.assign({},t.props),!1)),t.pagination.isShow?a("section",{staticClass:"pagination"},[a("pagination",t._b({directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.pagination.pageNum,limit:t.pagination.pageSize},on:{"update:page":function(e){return t.$set(t.pagination,"pageNum",e)},"update:limit":function(e){return t.$set(t.pagination,"pageSize",e)},pagination:t.getTableData}},"pagination",Object.assign({},t.pagination.props),!1))],1):t._e(),t.modal?a("HeEditModal",t._b({directives:[{name:"show",rawName:"v-show",value:t.modal.isShow,expression:"modal.isShow"}],attrs:{isShow:t.modal.isShow},on:{"update:isShow":function(e){return t.$set(t.modal,"isShow",e)},"update:is-show":function(e){return t.$set(t.modal,"isShow",e)},submit:t.submitEditForm}},"HeEditModal",Object.assign({},{extendsData:t.extendsData,modal:t.modal},t.modal),!1)):t._e()],1)])},i=[],o=a("5530"),s=a("53ca"),l=(a("d9e2"),a("99af"),a("4de4"),a("a15b"),a("d81d"),a("14d9"),a("fb6a"),a("a9e3"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0"),a("b775")),r=a("8fe1"),c=a("62c5"),u=function(t){if(!t)return console.error("getTableColumns 返回数据为: ",t),[];var e=function(t){return null!==t&&"object"===Object(s["a"])(t)&&"[object Object]"===Object.prototype.toString.call(t)&&!Array.isArray(t)};if(!e(t))return console.error("getTableColumns 返回数据为: ",t),[];var a=t.list||t.rows||t.rawData||t;return a&&Array.isArray(a)?a:(console.error("getTableColumns 解析列表数据为: ",a),[])},d={components:{HeBaseTable:c["a"],HeEditModal:function(){return Promise.all([a.e("chunk-elementUI"),a.e("chunk-commons"),a.e("chunk-7c706c2f")]).then(a.bind(null,"39ba"))},HeBaseSwitch:function(){return a.e("chunk-2d229c45").then(a.bind(null,"df9f"))}},props:{tabIndex:{type:[Number,String],default:0},extendsData:{type:Object,default:null},buttonsCfg:{type:Object,default:function(){return{}}},columnsCfg:{type:Object,require:!0,default:function(){return{}}},dataCfg:{type:Object,require:!0,default:function(){return{}}},pagination:{type:Object,default:function(){return{isShow:!0,pageNum:1,pageSize:15}}},props:{type:Object,default:function(){return{}}}},data:function(){return{buttons:this.buttonsCfg.data||[],columns:[],tableData:[],selectedRows:[],total:0,modal:null}},computed:{buttonRowsItems:function(){return this.buttonItems.filter((function(t){return"row"===t.showMode}))},buttonTopsItems:function(){var t=this;return this.buttonItems.filter((function(t){return"top"===t.showMode})).map((function(e){var a;return"Delete"===e.type?Object(o["a"])(Object(o["a"])({},e),{},{props:Object(o["a"])(Object(o["a"])({},e.props),{},{disabled:(null===(a=e.props)||void 0===a?void 0:a.disabled)||0===t.selectedRows.length})}):e}))},buttonItems:function(){return this.buttons},tableDataCpt:function(){var t=this.pagination,e=t.isShow,a=t.pageNum,n=t.pageSize;if(e){if(this.isTableApi)return this.tableData;if(this.isTableData){var i=(a-1)*n,o=i+n,s=Math.floor(this.tableData.length/n);return o>s&&(o=this.tableData.length),this.tableData.slice(i,o)}return this.tableData}return this.tableData},isTableData:function(){var t;return(null===(t=this.dataCfg)||void 0===t?void 0:t.data)&&Array.isArray(this.dataCfg.data)},isTableApi:function(){var t;return Boolean(null===(t=this.dataCfg)||void 0===t||null===(t=t.apiCfg)||void 0===t||null===(t=t.config)||void 0===t?void 0:t.url)||!1}},created:function(){this.onEventBus(),this.getTableColumns(),this.getTableData(),this.getTableButtons()},methods:{onEventBus:function(){var t=this;this.$eventBus.on("onNodeClick"+this.tabIndex,(function(e){var a=e.form;t.treeForm=a,t.getTableData()}),this)},handleSelectionChange:function(t){this.selectedRows=t},handleSelectAll:function(t){},handleSelect:function(t,e){},submitEditForm:function(t){var e=this,a=t.button,n=t.form,i=a.type,s=a.apiCfg,r=s.config,c=s.handleFixRequestData,u=s.handleFixResponseData,d=Object(o["a"])({},r),f=Object(o["a"])({},n);d.isUrlSplice?d.url+="/".concat(f.ids):d.params?d.params=f:d.data=f,this.$HE.isFunction(c)&&(d=c(d,this)),Object(l["a"])(d).then((function(t){e.$HE.isFunction(u)&&(t=u(t));var a=t||{},n=a.code;200===n&&(e.$message({type:"success",message:"".concat("Add"===i?"新增":"编辑","成功!")}),e.modal.isShow=!1,e.getTableData())}))},handleAdd:function(t){var e=t.modal;this.modal=Object(o["a"])(Object(o["a"])({},e),{},{button:t}),this.modal.isShow=!0},handleDelete:function(t){var e=this;this.$confirm("此操作将删除已选中的 ".concat(this.selectedRows.length," 条数据, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.apiCfg,n=a.config,i=a.handleFixRequestData,s=a.handleFixResponseData,r={ids:e.selectedRows.map((function(t){return t.id})).join()},c=Object(o["a"])({},n);c.isUrlSplice?c.url+="/".concat(r.ids):c.params?c.params=r:c.data=r,e.$HE.isFunction(i)&&(c=i(c,e.selectedRows)),Object(l["a"])(c).then((function(t){e.$HE.isFunction(s)&&(t=s(t));var a=t||{},n=a.code;200===n&&(e.$message({type:"success",message:"删除成功!"}),e.getTableData(),e.$eventBus.emit("onSearchTree"))}))})).catch((function(){}))},handleEdit:function(t,e){var a=this,n=e.row,i=t.detailApiCfg,s=(t.apiCfg,t.modal);if(this.modal=Object(o["a"])(Object(o["a"])({},s),{},{button:t}),i){if("function"===typeof i)return setTimeout((function(){a.modal.form=i(a.modal.form,n,a)}),100),void(this.modal.isShow=!0);this.modal.isShow=!0;var r=i.config,c=i.handleFixRequestData,u=i.handleFixResponseData,d=Object(o["a"])({},r);d.isUrlSplice?d.url+="/".concat(n.id||""):d.params?d.params=newForm:d.data=newForm,this.$HE.isFunction(c)&&(d=c(d,n)),Object(l["a"])(d).then((function(t){a.$HE.isFunction(u)&&(t=u(t));var e=t||{},n=e.code,i=e.data;if(200===n){if(!i)return;a.modal.form=i}}))}},handleView:function(t){this.$message({type:"success",message:"查看成功!"})},handelTopButtonClick:function(t){var e,a=t.label,n=t.type,i=t.apiCfg,o=t.modal,s=Boolean(null===i||void 0===i||null===(e=i.config)||void 0===e?void 0:e.url);if(!s)throw new Error("按钮[ ".concat(a,": ").concat(n," ]未正确配置, 缺少请求Api!"));if("Add"===n){if(!o)throw new Error("按钮[ ".concat(a,": ").concat(n," ]未正确配置, 缺少弹窗配置！"));this.handleAdd(t)}else"Delete"===n&&this.handleDelete(t)},handelRowButtonDisabled:function(t,e){return"function"===typeof t.disabled?t.disabled(e):!!t.disabled},handelRowButtonClick:function(t,e){var a=t.type;"Edit"===a&&this.handleEdit(t,e)},getTableColumns:function(){var t,e,a=this,n=Boolean(null===(t=this.columnsCfg)||void 0===t||null===(t=t.apiCfg)||void 0===t||null===(t=t.config)||void 0===t?void 0:t.url),i=(null===(e=this.columnsCfg)||void 0===e?void 0:e.data)&&Array.isArray(this.columnsCfg.data);if(!n&&!i)throw new Error("表头未正确配置，缺少请求Api 或 硬编码数据！");n?Object(l["a"])(this.columnsCfg.apiCfg.config).then((function(t){return a.columns=u(t)})):i&&(this.columns=this.columnsCfg.data),this.buttonRowsItems.length>0&&this.columns.every((function(t){return"$operate$"!==t.field}))&&this.columns.push({field:"$operate$",label:"操作",isOperate:!0})},getTableData:function(){var t=this;if(!this.isTableApi&&!this.isTableData)throw new Error("表格未正确配置，缺少请求Api 或 硬编码数据！");var e={};if(this.treeForm&&(e=Object.assign({},e,this.treeForm)),this.searchForm&&(e=Object.assign({},e,this.searchForm)),this.isTableApi){var a=this.dataCfg.apiCfg.config,n=this.pagination,i=n.pageNum,s=n.pageSize,c=Object(o["a"])({},a),d=Object.assign({},c.data||c.params,e);"get"===c.method?c.params=Object(o["a"])(Object(o["a"])({},d),{},{pageNum:i,pageSize:s}):"post"===c.method&&(c.data=Object(o["a"])(Object(o["a"])({},d),{},{pageNum:i,pageSize:s}));var f=this.dataCfg.apiCfg.handleFixRequestData;f&&this.$HE.isFunction(f)&&(c=f(c)),Object(l["a"])(c).then((function(e){e.code;var a=e.total,n=u(e),i=t.dataCfg.apiCfg.handleFixResponseData;if(i&&t.$HE.isFunction(i)&&(n=i(n)),t.columns.length>0){var o=t.columns.some((function(t){return t.options}));o&&(n=Object(r["a"])(t.columns,n))}t.tableData=n,t.total=a}))}else this.isTableData&&(this.tableData=this.dataCfg.data,this.total=this.tableData.length)},getTableButtons:function(){var t,e=this,a=this.buttonsCfg,n=a.data,i=a.apiCfg,s=Boolean(null===i||void 0===i||null===(t=i.config)||void 0===t?void 0:t.url),r=n&&Array.isArray(n);if(s){var c=i.config,u=i.handleFixRequestData,d=i.handleFixResponseData,f=i.handelFixButtonsData,h=Object(o["a"])({},c);this.$HE.isFunction(u)&&(h=u(h,this.selectedRows,this)),Object(l["a"])(this.buttonsCfg.apiCfg.config).then((function(t){e.$HE.isFunction(d)&&(t=d(t));var a=t,i=a.code,o=a.rows;if(200===i){var s=o||t.list||t.data||[],l=[];e.$HE.isFunction(f)&&(l=f(n,s)),e.buttons=l}}))}else r&&(this.buttons=this.buttonsCfg.data)}}},f=d,h=(a("d043"),a("2877")),b=Object(h["a"])(f,n,i,!1,null,"a04aa49c",null);e["default"]=b.exports},"8fe1":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a("5530"),i=(a("4de4"),a("7db0"),a("d81d"),a("b64b"),a("d3b7"),a("159b"),a("6d74"));function o(t,e){var a=t.filter((function(t){return t.options})),o={};return a.forEach((function(t){o[t.field]=i[t.options]||[]})),e.map((function(t){var e=Object(n["a"])({},t);return Object.keys(e).forEach((function(t){if(o[t]){var a=o[t].find((function(a){return a.value==e[t]}));e[t]=a?a.label:e[t]}})),e}))}},c034:function(t,e,a){},d043:function(t,e,a){"use strict";a("5e16")}}]);