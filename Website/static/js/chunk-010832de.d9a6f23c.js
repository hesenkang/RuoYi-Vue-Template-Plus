(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-010832de"],{"3ba4":function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("section",{staticClass:"container"},[n("el-card",{staticClass:"box-card"},[t.modal?n("HeBaseForm",t._b({ref:"baseForm",on:{submit:t.submitEditForm}},"HeBaseForm",Object.assign({},{modal:t.modal},t.modal.formCfg),!1)):t._e()],1)],1)},s=[],o=n("5530"),i=(n("7db0"),n("d3b7"),n("159b"),n("b775")),r=n("4619"),d={components:{HeBaseForm:r["default"]},props:{buttonsCfg:{type:Object,default:null}},data:function(){return{classId:null,nodeData:null}},computed:{buttonItems:function(){var t,a=(null===(t=this.buttonsCfg)||void 0===t?void 0:t.data)||null;return Array.isArray(a)?a:[]},button:function(){var t=this;return this.buttonItems.find((function(a){return t.nodeData?"Edit"===a.type:"Add"===a.type}))},modal:function(){return this.button.modal}},mounted:function(){var t=this;this.$eventBus.on("initClassId",(function(a){t.classId=a,t.modal.formCfg.fields.forEach((function(t){"parentId"===t.field&&(t.props.apiCfg.config.params={classId:a})})),t.$refs.baseForm.resetForm()}),this),this.$eventBus.on("onNodeClick",(function(a){var n=a.item,e=void 0===n?null:n;a.classId;t.nodeData=e||null,e?t.handleEdit(t.button,{row:{id:e.id}}):t.$refs.baseForm.resetForm()}),this)},methods:{handleEdit:function(t,a){var n=this,e=a.row,s=t.detailApiCfg,r=(t.apiCfg,t.modal),d=s.config,c=(s.handleFixRequestData,s.handleFixResponseData),u=Object(o["a"])({},d);u.isUrlSplice?u.url+="/".concat(e.id||""):u.params?u.params=newForm:u.data=newForm,Object(i["a"])(u).then((function(t){n.$HE.isFunction(c)&&(t=c(t));var a=t||{},e=a.code,s=a.data;if(200===e){if(!s)return;r.form=s}}))},submitEditForm:function(t){var a=this;this.$refs.baseForm.validate().then((function(n){if(n){var e=a.button,s=e.type,r=e.apiCfg,d=(e.modal,r.config),c=r.handleFixRequestData,u=r.handleFixResponseData,l=Object(o["a"])({},d),f=Object(o["a"])({},t);null===a.nodeData&&(f.classId=a.classId),l.isUrlSplice?l.url+="/".concat(f.ids):l.params?l.params=f:l.data=f,a.$HE.isFunction(c)&&(l=c(l)),Object(i["a"])(l).then((function(t){a.$HE.isFunction(u)&&(t=u(t));var n=t||{},e=n.code;200===e&&(a.$message({type:"success",message:"".concat("Add"===s?"新增":"编辑","成功!")}),a.$eventBus.emit("refresh"))}))}}))}}},c=d,u=(n("b6a1"),n("2877")),l=Object(u["a"])(c,e,s,!1,null,"0253048b",null);a["default"]=l.exports},b6a1:function(t,a,n){"use strict";n("f5dc")},f5dc:function(t,a,n){}}]);