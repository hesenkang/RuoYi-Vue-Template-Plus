(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2f15"],{"25ea":function(e,t,a){"use strict";a.r(t);var r=a("2909"),i=a("5530"),n=(a("d9e2"),a("99af"),a("4de4"),a("7db0"),a("caad"),a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),{name:"侧栏",isShow:!0,props:{width:"320px"},viewData:{name:"sideTree",apiCfg:{config:{url:"/paramodelset/getTree",method:"post",data:{}}},data:function(){return[]||!1},props:{nodeKey:"id",defaultProps:{children:"children",label:"devModelName"}}}}),o={name:"头部",isShow:!0,props:{height:"none"},viewData:{asyncComponent:"",componentCfg:{apiCfg:{config:{url:"",method:"",data:{}},handleFixRequestData:function(e){return e},handleFixResponseData:function(e){return e}},fields:[{label:"名称",field:"name",type:"input",props:{}}],hasControl:!0,submitText:"提交",resetText:"重置",props:{inline:!0}}}},d=function(){return[{label:"计费类型",field:"chargeType",defaultValue:"1",isShow:!1,isIgnore:!1},{label:"方案名称",field:"programName",type:"input",props:{},isRequired:!0},{label:"收费方式",field:"chargeMethod",type:"radio",props:{},defaultValue:"1",options:"ChargeMethod",isRequired:!0},{label:"单价(¥)",field:"price",type:"inputNumber",props:{precision:2,step:.1},defaultValue:1,isRequired:!0,isShow:function(e){return"1"==e.chargeMethod}},{label:"",field:"timePriceList",type:"HeTimePrice",props:{startEndTimeRule:[{required:!0,validator:function(e,t,a){t&&Array.isArray(t)&&2===t.length?a():a(new Error("请选择时间范围"))},trigger:["change","blur"]},{required:!0,validator:function(e,t,a){t[0]&&t[1]&&t[0]>=t[1]?a(new Error("结束时间必须晚于开始时间")):a()},trigger:["change","blur"]}],priceRule:[{required:!0,message:"单价是必填项",trigger:"blur"}]},defaultValue:[{name:"时段1",code:"Date",startEndTime:null,price:""}],isShow:function(e){return"2"==e.chargeMethod}},{label:"",field:"JFPGTimePriceList",type:"HeJFPGTimePrice",props:{},defaultValue:[{name:"尖电价(¥/kW·h)",code:"JD",startEndTime:null,price:""},{name:"峰电价(¥/kW·h)",code:"FD",startEndTime:null,price:""},{name:"平电价(¥/kW·h)",code:"SD",startEndTime:null,price:""},{name:"谷电价(¥/kW·h)",code:"GD",startEndTime:null,price:""},{name:"深谷电价(¥/kW·h)",code:"SGD",startEndTime:null,price:""}],isShow:function(e){return"3"==e.chargeMethod},isIgnore:!0}]},l={name:"主体",props:{},viewData:{asyncComponent:function(){return Promise.all([a.e("chunk-commons"),a.e("chunk-9657921a")]).then(a.bind(null,"7bdb"))},componentCfg:{buttonsCfg:{data:[{label:"添加电价方案",type:"Add",showMode:"top",props:{type:"primary"},apiCfg:{config:{url:"/energy/program",method:"post",data:{}},handleFixRequestData:function(e){var t=Object(i["a"])({},e),a=t.data;"1"==a.chargeMethod&&(a.timePriceList=[{name:"全天",code:"ALL",startTime:"00:00:00",endTime:"23:59:59",price:a.price}],delete a.price);var r=function(e){var t=Object(i["a"])(Object(i["a"])({},e),{},{startTime:e.startEndTime[0],endTime:e.startEndTime[1]});return delete t.startEndTime,t};return"2"==a.chargeMethod&&(a.timePriceList=a.timePriceList.map(r)),"3"==a.chargeMethod&&(a.timePriceList=a.JFPGTimePriceList.map(r),delete a.JFPGTimePriceList),t},handleFixResponseData:function(e){return e}},modal:{isShow:!1,title:"添加电价方案",hasControl:!0,submitText:"确 定",closeText:"取 消",formCfg:{fields:d(),hasControl:!1,props:{inline:!1,"label-width":"100px"}},form:{}}},{label:"添加水价方案",type:"Add",showMode:"top",apiCfg:{config:{url:"/energy/program",method:"post",data:{}},handleFixRequestData:function(e){var t=Object(i["a"])({},e),a=t.data;return a.timePriceList=[{name:"全天",code:"ALL",startTime:"00:00:00",endTime:"23:59:59",price:a.price}],delete a.price,t},handleFixResponseData:function(e){return e}},props:{type:"primary"},modal:{isShow:!1,title:"添加水价方案",hasControl:!0,submitText:"确 定",closeText:"取 消",formCfg:{fields:[{label:"计费类型",field:"chargeType",defaultValue:"2",isShow:!1,isIgnore:!1},{label:"方案名称",field:"programName",type:"input",props:{},isRequired:!0},{label:"单价(¥)",field:"price",type:"input",props:{},isRequired:!0}],hasControl:!1,props:{"label-width":"100px"}},form:{}}},{label:"删除",type:"Delete",showMode:"top",props:{type:"danger"},apiCfg:{config:{url:"/energy/program",method:"delete",params:{},isUrlSplice:!0},handleFixRequestData:function(e){return e},handleFixResponseData:function(e){return e}}},{label:"编辑",type:"Edit",showMode:"row",props:{type:"text"},detailApiCfg:{config:{url:"/energy/program",method:"get",params:{},isUrlSplice:!0},handleFixResponseData:function(e){var t=Object(i["a"])({},e),a=t.data,r={id:a.id,programName:a.programName,chargeMethod:a.chargeMethod},n={2:"timePriceList",3:"JFPGTimePriceList"},o=n[a.chargeMethod];return"1"==a.chargeMethod?r.price=a.timePriceList.find((function(e){return e.programId===a.id})).price:o&&(r[o]=a.timePriceList.filter((function(e){return e.programId===a.id})).map((function(e){return{programId:e.programId,name:e.name,code:e.code,startEndTime:[e.startTime,e.endTime],price:e.price}}))),t.data=r,t}},apiCfg:{config:{url:"/energy/program",method:"put",data:{}},handleFixRequestData:function(e){var t=Object(i["a"])({},e),a=t.data;"1"==a.chargeMethod&&(a.timePriceList=[{name:"全天",code:"ALL",startTime:"00:00:00",endTime:"23:59:59",price:a.price}],delete a.price);var r=function(e){var t=Object(i["a"])(Object(i["a"])({},e),{},{startTime:e.startEndTime[0],endTime:e.startEndTime[1]});return delete t.startEndTime,t};return"2"==a.chargeMethod&&(a.timePriceList=a.timePriceList.map(r)),"3"==a.chargeMethod&&(a.timePriceList=a.JFPGTimePriceList.map(r),delete a.JFPGTimePriceList),t},handleFixResponseData:function(e){return e}},modal:{isShow:!1,title:"编辑方案",hasControl:!0,submitText:"确 定",closeText:"取 消",formCfg:{fields:d(),hasControl:!1,props:{inline:!1}},form:{}}}],apiCfg:{config:{url:"/energy/type/list",method:"get",params:{pageNum:1,pageSize:9999}},handelFixButtonsData:function(e,t){var a=e.slice(2),i=t.map((function(t){var a=null;return a=t.energyName.includes("电")?$HE.deepClone(e[0]):$HE.deepClone(e[1]),a.label="添加".concat(t.energyName,"价方案"),a.modal.title="添加".concat(t.energyName,"价方案"),Array.isArray(a.modal.formCfg.fields)&&a.modal.formCfg.fields.forEach((function(e){"chargeType"===e.field&&(e.defaultValue=t.meterType)})),a}));return[].concat(Object(r["a"])(i),Object(r["a"])(a))}}},columnsCfg:{data:[{label:"方案名称",field:"programName",align:"center"},{label:"计费类型",field:"chargeType",align:"center",options:"ChargeType"},{label:"状态",field:"status",align:"center",components:"HeBaseSwitch",props:{apiCfg:{config:{url:"/energy/program/changeStatus",method:"put",data:{}},handleFixRequestData:function(e,t){var a=t.row,r=Object(i["a"])({},e);return r.data={id:a.id,status:"1"===a.status?"0":"1"},r},handleFixResponseData:function(e){return e}}}},{label:"创建人",field:"createBy",align:"center"},{label:"创建时间",field:"createTime",align:"center"},{label:"更新时间",field:"updateTime",align:"center"}],apiCfg:{config:{url:"",method:"",data:{}},handleFixResponseData:function(e){return e}}},dataCfg:{data:[],apiCfg:{config:{url:"/energy/program/list",method:"get",data:{}},handleFixRequestData:function(e){return e},handleFixResponseData:function(e){return e}}},pagination:{isShow:!0,pageNum:1,pageSize:15,props:{"page-sizes":[15,30,40,50,100]}},props:{checkable:!0}}}},p={aside:n,mainHeader:o,main:l,footer:{name:"底部",isShow:!1}};t["default"]=p}}]);